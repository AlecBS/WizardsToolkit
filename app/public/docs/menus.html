<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Wizard's Toolkit Menus</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="shortcut icon" href="/wtk/favicon/favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/base.css">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:wght@400;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/template.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0/css/all.min.css" integrity="sha256-ybRkN9dBjhcS2qrW1z+hfCxq+1aBdwyQM5wlQoQVt/0=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/themes/prism-okaidia.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/line-numbers/prism-line-numbers.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/line-highlight/prism-line-highlight.css">
    <script src="https://cdn.jsdelivr.net/npm/fuse.js@3.4.6"></script>
    <script src="https://cdn.jsdelivr.net/npm/css-vars-ponyfill@2"></script>
    <script src="js/search.js"></script>
    <script defer src="js/searchIndex.js"></script>
</head>
<body onload="JavaScript:getSideNav('root')" id="top">
    <header class="phpdocumentor-header phpdocumentor-section">
        <h1 class="phpdocumentor-title"><a href="index.html" class="phpdocumentor-title__link">Wizard&rsquo;s Toolkit&nbsp;<small>Documentation</small></a></h1>
        <input class="phpdocumentor-header__menu-button" type="checkbox" id="menu-button" name="menu-button" />
        <section data-search-form class="phpdocumentor-search">
            <label>
                <span class="visually-hidden">Search for</span>
                <svg class="phpdocumentor-search__icon" width="21" height="20" viewBox="0 0 21 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="7.5" cy="7.5" r="6.5" stroke="currentColor" stroke-width="2"/>
                    <line x1="12.4892" y1="12.2727" x2="19.1559" y2="18.9393" stroke="currentColor" stroke-width="3"/>
                </svg>
                <input type="search" class="phpdocumentor-field phpdocumentor-search__field" placeholder="Loading ..." disabled />
            </label>
        </section>
    </header>

    <main class="phpdocumentor">
        <div class="phpdocumentor-section">
            <input class="phpdocumentor-sidebar__menu-button" type="checkbox" id="sidebar-button" name="sidebar-button" />
<label class="phpdocumentor-sidebar__menu-icon" for="sidebar-button">Menu</label>
<aside id="sidenav" class="phpdocumentor-column -four phpdocumentor-sidebar">&nbsp;</aside>

<div class="phpdocumentor-column -eight phpdocumentor-content">
    <h2>Wizard&rsquo;s Toolkit Data-Driven Menus</h2>
    <p>Drop menus can be managed using the Back Office.  These are completely data-driven and work for drop-down menus plus
        when the viewport is narrow it automatically changes to show as a hamburger-styled side-bar menu.</p>
    <p>In the WTK Back Office you can create as many &ldquo;Menu Sets&rdquo; as you like.</p>

    <h3 id="toc">Table of Contents</h3>

    <dl class="phpdocumentor-table-of-contents">
        <dt class="phpdocumentor-table-of-contents__entry -function">
            <a href="#info">MaterializeCSS HTML Syntax</a>
        </dt>
        <dt class="phpdocumentor-table-of-contents__entry -function">
            <a href="#hardcode">Hard-Coded in PHP</a>
        </dt>
        <dt class="phpdocumentor-table-of-contents__entry -function">
            <a href="#afterLogin">Menu Loaded After Login</a>
        </dt>
        <dt class="phpdocumentor-table-of-contents__entry -function">
            <a href="#userLogin">Menu Based on User Login</a>
        </dt>
        <dt class="phpdocumentor-table-of-contents__entry -function">
            <a href="#JSfuncs">JavaScript Functions</a>
        </dt>
    </dl>
<br>
    <h3 id="info">MaterializeCSS HTML Syntax</h3>
    <p>The HTML generated by WTK is built for MaterializeCSS menus.  A single call to <b>wtkMenu</b> builds
        the HTML for both MaterializeCSS
        <a href="https://materializecss.com/navbar.html#navbar-dropdown" target="_blank">Dropdown Menus</a> and
        <a href="https://materializecss.com/navbar.html#mobile-collapse" target="_blank">Mobile Collapsed</a> menus.</p>
    <p>The Menu Set can be hard-coded in PHP, based on a user&rsquo;s login or based on their staff role.</p>

    <section class="phpdocumentor-functions">
        <article class="phpdocumentor-element -function">
            <h4 class="phpdocumentor-element__name" id="hardcode">Hard-Coded in PHP</h4>
            <p class="phpdocumentor-summary">If you want to have a menu shown without requiring logging in,
                then pass into the <b>wtkMenu()</b> function the name of the menu set to display.  For example:</p>
            <code class="phpdocumentor-code phpdocumentor-signature">
&lt;?php<br>// normal WTK php code...<br>
wtkSearchReplace('&lt;!-- @wtkMenu@ -->', <b>wtkMenu('YourMenuSetName'))</b>;<br><br>
wtkMergePage($pgHtm, $gloCoName, 'wtk/htm/spa.htm');<br>
?>
            </code>
            <p>This is assuming you are using the standard HTML template provided by Wizard&rsquo;s Toolkit
                which contains.</p>
            <code class="phpdocumentor-code phpdocumentor-signature">
    &lt;div id="myNavbar" class="hide"><br>
&lt;!-- @wtkMenu@ --><br>
	&lt;/div>
            </code>
            <br>

            <dt class="phpdocumentor-table-of-contents__entry -function">
                Full specifications on wtkMenu function at: &nbsp;
                <a href="files/wtk-lib-materialize.html#function_wtkMenu">wtkMenu()</a>
            </dt>
        </article>

        <article class="phpdocumentor-element -function">
            <h4 class="phpdocumentor-element__name" id="afterLogin">Menu Loaded after Login</h4>
            <p class="phpdocumentor-summary">If you want to have a menu loaded only after logging in (which is
                more secure), then pass into the <b>wtkLoginForm</b> JavaScript function the name of the menu set
                to load and display upon a successful login.  For example:</p>

            <code class="phpdocumentor-code phpdocumentor-signature">
&lt;?php<br>// normal WTK php code...<br>
wtkSearchReplace("wtkLoginForm('')", "wtkLoginForm('YourAdminMenu')")</b>;<br><br>
wtkMergePage($pgHtm, $gloCoName, 'wtk/htm/spa.htm');<br>
?>
            </code>
        </article>

        <article class="phpdocumentor-element -function">
            <h4 class="phpdocumentor-element__name" id="afterLogin">Page-Driven Menus</h4>
            <p class="phpdocumentor-summary">In the Back Office under "Site Management" choose "Page List"
                to add pages for your menu to access.  You will see there are already several that are built-in
                which come with the Wizard&rsquo;s Toolkit.</p>
            <p class="phpdocumentor-summary">Under "Site Management" you can then choose "Menu Sets".
              From here you create new Menu Sets or edit the current Menu Set.  Within each Menu Set
              you define Menu Groups which are the titles of the Drop Lists.  Within those you define
              Menu Items which are the Pages in the "Page List".</p>
            <p class="phpdocumentor-summary">Note that in the Menu Groups you can also set the "Group URL".
                This is usually only done when you want the Menu Group to go directly to a page instead of having
                a drop list of Menu Items.  There are two special items you can put in here in addition to URLs.
                If you put 'dashboard' then the WTK function will replace it with the JavaScript function to call the Dashboard.
                If you put 'logout' then the WTK function will replace it with the JavaScript function to logout.</p>
        </article>

        <article class="phpdocumentor-element -function">
            <h4 class="phpdocumentor-element__name" id="userLogin">Menu Based on User Login</h4>
            <p class="phpdocumentor-summary">Sometimes you will want to show a different menu set depending
                on a user&rsquo;s <b>Staff Role</b> or their menu choice.  This is easily possible also. In
                the WTK Back Office you can assign <b>Staff Role</b> to each user.  If you make a
                &ldquo;Menu Set&rdquo; with a name that matches the Staff Role value, that will be used
                if you pass to the <b>wtkLoginForm</b> function 'byRole'.</p>
            <p>For each user you can also override what their Menu Set should be.  If this value is set
                it will be used instead of the 'Staff Role' menu set. For example:</p>

            <code class="phpdocumentor-code phpdocumentor-signature">
&lt;?php<br>// normal WTK php code...<br>
wtkSearchReplace("wtkLoginForm('')", "wtkLoginForm('byRole')")</b>;<br><br>
wtkMergePage($pgHtm, $gloCoName, 'wtk/htm/spa.htm');<br>
?>
            </code>
            <p>By passing <b>'byRole'</b> when ajxLogin.php is called it will retrieve the Menu Set using
                SQL like this:</p>
            <code class="phpdocumentor-code phpdocumentor-signature">
SELECT COALESCE(`MenuSet`, `StaffRole`) AS `MenuSet`<br>
  FROM `wtkUsers`<br>
WHERE `UID` = :UID
            </code>
        </article>
    </section>

        <!-- To make this work you pass in a parameter to the
         JS wtkLoginForm function.  To modify the HTML template in your PHP do this: -->

    <h3 id="JSfuncs">JavaScript Functions</h3>
       <article class="phpdocumentor-element -function">
           <h4 class="phpdocumentor-element__name" id="function_ajaxFillDiv">
               ajaxFillDiv()
               <a href="#function_ajaxFillDiv" class="headerlink"><i class="fas fa-link"></i></a>
           </h4>
           <p class="phpdocumentor-summary">Call PHP page and use results to fill a <b>div</b>.</p>

           <code class="phpdocumentor-code phpdocumentor-signature">
               <span class="phpdocumentor-signature__visibility"></span>
               <span class="phpdocumentor-signature__name">ajaxFillDiv(fncPage, fncParam, fncDiv)</span>
           </code>

       <section class="phpdocumentor-description"><p>This fills a &lt;div> with results from PHP page.</p></section>

           <h5 class="phpdocumentor-argument-list__heading">Parameters</h5>
           <dl class="phpdocumentor-argument-list">
               <dt class="phpdocumentor-argument-list__entry">
                   <span class="phpdocumentor-signature__argument__name">fncPage</span>
                   : <span class="phpdocumentor-signature__argument__return-type">string</span>
               </dt>
               <dd class="phpdocumentor-argument-list__definition">Name of PHP page to direct to. The '.php' is appended.</dd>
           </dl>
           <dl class="phpdocumentor-argument-list">
               <dt class="phpdocumentor-argument-list__entry">
                   <span class="phpdocumentor-signature__argument__name">fncParam</span>
                   : <span class="phpdocumentor-signature__argument__return-type">string</span>
               </dt>
               <dd class="phpdocumentor-argument-list__definition">This will be passed as <b>p</b> parameter to called page.</dd>
           </dl>
           <dl class="phpdocumentor-argument-list">
               <dt class="phpdocumentor-argument-list__entry">
                   <span class="phpdocumentor-signature__argument__name">fncDiv</span>
                   : <span class="phpdocumentor-signature__argument__return-type">string</span>
               </dt>
               <dd class="phpdocumentor-argument-list__definition">This is the <b>id</b> of the &lt;div> that you want to replace the HTML of.</dd>
           </dl>

           <h5 class="phpdocumentor-return-value__heading">Action</h5>
           <section class="phpdocumentor-description"><p>Uses AJAX to retrieve HTML returned by call to fncPage and displays it in
            <strong>fncDiv</strong> div.<br>Example call which will update the data-driven menu:</p></section>

             <code class="phpdocumentor-code phpdocumentor-signature">
                ajaxFillDiv('menuRefresh','YourMenuSetName','myNavbar');
             </code>
           <section class="phpdocumentor-description"><p>The 'menuRefresh' first parameter also forces JS
            for MaterializeCSS dropdown and collapsible triggering.</p></section>
       </article>

<section data-search-results class="phpdocumentor-search-results phpdocumentor-search-results--hidden">
    <section class="phpdocumentor-search-results__dialog">
        <header class="phpdocumentor-search-results__header">
            <h2 class="phpdocumentor-search-results__title">Search results</h2>
            <button class="phpdocumentor-search-results__close"><i class="fas fa-times"></i></button>
        </header>
        <section class="phpdocumentor-search-results__body">
            <ul class="phpdocumentor-search-results__entries"></ul>
        </section>
    </section>
</section>
            </div>
        </div>
        <a href="#top" class="phpdocumentor-back-to-top"><i class="fas fa-chevron-circle-up"></i></a>
    </main>
    <script>
        cssVars({});
    </script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/prism.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/line-highlight/prism-line-highlight.min.js"></script>
</body>
</html>
